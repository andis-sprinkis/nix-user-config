#!/usr/bin/env sh
set -eu

while getopts i:o: name; do
  case "$name" in
    "i")
      device="@DEFAULT_AUDIO_SOURCE@"
    ;;
    "o")
      device="@DEFAULT_SINK@"
    ;;
    *)
      exit "2"
    ;;
  esac

  case "$OPTARG" in
    "mute")
      exec wpctl "set-mute" "$device" "1"
    ;;
    "toggle")
      exec wpctl "set-mute" "$device" "toggle"
    ;;
    "unmute")
      exec wpctl "set-mute" "$device" "0"
    ;;
    *"%-"|"-")
      exec wpctl "set-volume" "$device" "3%-"
    ;;
    *"%+"|"+")
      exec wpctl "set-volume" "$device" "3%+"
    ;;
    *)
      exit "2"
    ;;
  esac
done

exit "1"
