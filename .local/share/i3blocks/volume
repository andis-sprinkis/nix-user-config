#!/usr/bin/env sh

STEP="${STEP:-"5"}"

[ "$BLOCK_BUTTON" ] && {
  case $BLOCK_BUTTON in
    1) easyeffects 1>/dev/null 2>/dev/null & disown ;;
    3) wpctl set-mute @DEFAULT_SINK@ toggle ;;
    4) wpctl set-mute @DEFAULT_SINK@ 0; wpctl set-volume @DEFAULT_SINK@ "${STEP}%+" ;;
    5) wpctl set-mute @DEFAULT_SINK@ 0; wpctl set-volume @DEFAULT_SINK@ "${STEP}%-" ;;
  esac
}

volume="$(wpctl get-volume @DEFAULT_SINK@ | cut -d' ' -f2)"
[ "$volume" ] && echo "${PREFIX}$(printf '%.0f%%' "$(echo "100 * ${volume}" | bc)")${SUFFIX}"
